# Block assignment for ordinals
type OrdinalsAssignment @entity {
  # {txid}:{output_idx}:{idx}
  id: ID!
  # Block at which the ordinals were mined
  block: Block!
  # First ordinal of the block assignment
  start: BigInt!
  # Number of ordinals in the block assignment
  size: BigInt!
  # The index of the block assignment of the UTXO (starts at 0)
  # E.g.: An idx of 2 signifies that it is the 3rd block assignment 
  # of ordinals for the utxo
  idx: Int!
  # UTXO to which this block of ordinals is assigned
  utxo: Utxo!
  # The inscriptions present in the block assignment
  inscriptions: [Inscription!]! @derivedFrom(field: "ordinals")
}

type Utxo @entity {
  id: ID!
  txid: String!
  amount: BigInt!
  ordinals: [OrdinalsAssignment!]! @derivedFrom(field: "utxo")
  unspent: Boolean!

  block: Block!

  # Not yet implemented
  spent_in: Block
}

type Inscription @entity {
  id: ID!
  content_type: String
  parent: String
  metadata: String
  metaprotocol: String
  content_encoding: String
  content: String!

  ordinal: BigInt!
  ordinals: OrdinalsAssignment!
}

# TODO: (maybe)
# type Transaction {
#   id: ID!
#   input_utxos: [Utxo!]!
#   output_utxos: [Utxo!]!
#   inscriptions: [Bytes!]!
#   amount: BigInt!
#   fee: BigInt!
# }

type Block @entity {
  id: ID!
  # TODO: (maybe)
  # reward: BigInt!
  # subsidy: BigInt!
  # total_fees: BigInt!
  # input_utxos: [Utxo!]! @derivedFrom(field: "spent_in")
  output_utxos: [Utxo!]! @derivedFrom(field: "block")
}
